!function(){if(!$||!$.validator)return;function e(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}$.extend($.validator.messages,{required:"Это поле обязательно",remote:"Пожалуйста, введите правильное значение.",email:"Пожалуйста, введите корректный e-mail",url:"Пожалуйста, введите корректный URL.",date:"Пожалуйста, введите корректную дату.",dateISO:"Пожалуйста, введите корректную дату в формате ISO.",number:"Пожалуйста, введите число.",digits:"Пожалуйста, вводите только цифры.",creditcard:"Пожалуйста, введите правильный номер кредитной карты.",equalTo:"Пароли не совпадают!",extension:"Пожалуйста, выберите файл с правильным расширением.",maxlength:$.validator.format("Пожалуйста, введите не больше {0} символов."),minlength:$.validator.format("Пожалуйста, введите не меньше {0} символов."),rangelength:$.validator.format("Пожалуйста, введите значение длиной от {0} до {1} символов."),range:$.validator.format("Пожалуйста, введите число от {0} до {1}."),max:$.validator.format("Пожалуйста, введите число, меньшее или равное {0}."),min:$.validator.format("Пожалуйста, введите число, большее или равное {0}.")}),$.validator.addMethod("email",(function(e,t){return this.optional(t)||/^[-\w.]+@([A-z0-9][-A-z0-9]+\.)+[A-z]{2,6}$/.test(e)}),"Введите корректный e-mail");var t=$("#js-eventForm");t.length&&t.validate({errorElement:"span"});var a=$("#js-subscribeForm");if(a.length){const e=a.find("#js-subscribeEmail"),t=a.attr("action");a.validate({errorElement:"span",submitHandler:function(a,r){r.preventDefault(),$.ajax({url:t,data:{email:e.val()},method:"POST",success:function(){e.val(""),e.blur(),toastr.success("Вы успешно подписались на рассылку новостей","")},error:function(){toastr.error("Попробуйте еще раз","Ошибка")}})}})}const r=$("#js-reserve");if(r.length){const t=JSON.parse(r.attr("data-price")),a=Object.keys(t),n={},s=r.find(".js-reserveCheck"),i=r.find("#js-reserveScene"),c=r.find("#js-reservePriceList"),d=c.attr("data-caption"),l=r.find("#js-reserveTicketsList"),o=l.attr("data-caption"),v=l.attr("data-currency"),m=r.find("#js-reserveTotal"),u=r.find("#js-reserveSubmit"),f=function(){let r=0;a.forEach((function(a){const s=n[a].qty,i=n[a].qty*t[a];n[a].qtyEl.html(s),n[a].sumEl.html(e(i)),r+=i})),m.html(e(r)),r>0?u.removeClass("btn--disabled"):u.addClass("btn--disabled")};a.forEach((function(e){c.append(`<div class="reserve__price-item reserve__price-item--${e}" "data-caption="${d}">\n           ${t[e]} +\n         </div>`);const a=$('<div class="reserve__tickets">'),r=$(`<div class="reserve__qty" data-caption="${o}" data-price="${t[e]}">`),s=$(`<div class="reserve__sum" data-currency="${v}">`);a.append(r),a.append(s),l.append(a),n[e]={},n[e].qty=0,n[e].qtyEl=r,n[e].sumEl=s})),$.each(s,(function(e){const t=this,a=$(t).attr("name");if(!a)return;const r=i.find("[data-check="+a+"]");if($(this).attr("disabled"))return void r.addClass("scene__table--disabled");const s=$(t).attr("data-type")||"black";t.checked&&(n[s].qty+=1,r.addClass("scene__table--active")),$(t).on("change",(function(){this.checked?(n[s].qty+=1,r.addClass("scene__table--active")):(n[s].qty>0&&(n[s].qty-=1),r.removeClass("scene__table--active")),f()})),r.on("click",(function(){t.checked=!t.checked,$(t).trigger("change")}))})),f()}}();